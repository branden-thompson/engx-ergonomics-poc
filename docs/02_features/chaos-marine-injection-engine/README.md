# 🎯 Chaos Marine Injection Engine

> **Educational chaos engineering for developer resilience training**

## 🚀 **Quick Start**

### **Enable Chaos Marine**
```bash
# Probabilistic chaos injection (10% chance per step)
engx create my-app --dev-only --chaos-marine --chaos-level=apocalyptic

# Guaranteed chaos for testing
export CHAOS_MARINE_FORCE_INJECTION=true
engx create test-app --dev-only --chaos-marine --chaos-level=apocalyptic
```

### **Test Error Templates**
```bash
# Test different failure scenarios
engx test-error --type=network_failure --severity=critical --chaos
engx test-error --type=permission_denied --severity=fatal --chaos
```

## 🎓 **What is Chaos Marine?**

The **Chaos Marine** is an educational chaos engineering system that simulates realistic failures during development workflows to help developers:

- **Learn resilience** through controlled failure simulation
- **Practice troubleshooting** with guided recovery actions
- **Understand failure modes** through realistic error scenarios
- **Build confidence** in handling production incidents

## 🎯 **Features**

### **✅ Educational Error Templates**
Beautiful 80-character formatted error messages with:
- Clear problem description
- Step-by-step recovery actions
- Educational explanations
- Realistic stack traces
- Troubleshooting context

### **✅ Configurable Difficulty**
Six aggressiveness levels:
- **off** (0%) - Disabled
- **default** (0.1%) - Minimal learning mode
- **scout** (0.5%) - Light introduction
- **aggressive** (1%) - Regular practice
- **invasive** (5%) - Intensive training
- **apocalyptic** (10%) - Maximum difficulty

### **✅ Realistic Failure Scenarios**
- **Network Failures**: npm registry connection issues
- **Permission Errors**: File system access problems
- **Resource Exhaustion**: Disk space and memory issues
- **Dependency Conflicts**: Package version conflicts

### **✅ Safety-First Design**
- Clear distinction between chaos and real errors
- Zero impact when disabled
- Production-safe implementation
- Graceful degradation

## 🔧 **Usage Examples**

### **Development Workflow**
```bash
# Enable light chaos during development
engx create my-project --dev-only --chaos-marine --chaos-level=scout

# Intensive resilience training
engx create training-app --dev-only --chaos-marine --chaos-level=invasive
```

### **Team Training**
```bash
# Practice session with guaranteed failures
export CHAOS_MARINE_FORCE_INJECTION=true
engx create team-training --dev-only --chaos-marine --chaos-level=aggressive
```

### **Testing Different Scenarios**
```bash
# Test each failure type
for scenario in network_failure permission_denied resource_exhausted dependency_conflict; do
  engx test-error --type=$scenario --chaos
done
```

## 📊 **Error Template Example**

```
---- ERROR ---------------------------------------------- CRITICAL FAILURE ----

      x Network connection failed during dependency download

  Let's get you back on track:
   ├ Try: npm cache clean --force && npm install
   ├ If that doesn't work: Check your internet connection and try again
   └ Still stuck? Contact: DevOps Team

  Summary:
   └ The npm install command failed because it couldn't reach the package
   └ registry. This commonly happens due to network connectivity issues,
   └ corporate firewall restrictions, or temporary registry outages.

  Additional Context:
   └ This error occurred during the 'Installing dependencies' step. The npm
   └ registry may be experiencing issues, or your network configuration might
   └ be blocking the connection. If you're behind a corporate firewall, you may
   └ need to configure npm proxy settings.

  Stack Trace:
   at npmInstall (/usr/local/lib/node_modules/npm/lib/install.js:142:15)
   at fetchPackage (/usr/local/lib/node_modules/npm/lib/fetch.js:87:12)
   at Registry.request (/usr/local/lib/node_modules/npm/lib/registry.js:234:9)
   at ClientRequest.onError (/usr/local/lib/node_modules/npm/lib/request.js:156:21)
   Error: ENOTFOUND registry.npmjs.org

---- Error generated by CHAOS MARINE (apocalyptic level) -----------------------
```

## ⚙️ **Configuration Options**

### **Command Line Flags**
```bash
--chaos-marine              # Enable chaos injection
--chaos-level=LEVEL         # Set aggressiveness level
--chaos-seed=NUMBER         # Deterministic chaos for testing
--chaos-config=PATH         # Custom configuration file
```

### **Environment Variables**
```bash
CHAOS_MARINE_FORCE_INJECTION=true    # Guarantee chaos for testing
CHAOS_MARINE_ENABLED=true           # Enable via environment
CHAOS_MARINE_AGGRESSIVENESS=scout   # Set level via environment
```

## 🏗️ **Architecture**

### **Core Components**
```
internal/chaos/
├── config.go          # Configuration and aggressiveness levels
├── injector.go         # Core injection logic and safety monitoring
├── tracker.go          # TUI integration and step execution
└── error_template.go   # 80-char formatted error messages
```

### **Integration Points**
- **CLI Commands**: Seamless flag integration
- **TUI Progress**: Real-time chaos during step execution
- **Error Display**: Beautiful terminal error formatting
- **Testing Framework**: Guaranteed injection for development

## 🎯 **Educational Philosophy**

The Chaos Marine follows these principles:

1. **Learning-Focused**: Every error is a teaching opportunity
2. **Practical Recovery**: Actionable steps, not just theory
3. **Realistic Scenarios**: Mirror real production failures
4. **Progressive Difficulty**: Build skills gradually
5. **Safe Environment**: Learn without production risk

## 🔮 **Future Enhancements**

### **Phase 3 Roadmap**
- 🎓 Progressive hints system
- 🧠 Adaptive difficulty based on user skill
- 🔄 Interactive recovery mode
- 📊 Learning progress analytics
- 🎨 Color-coded error messages

## 📚 **Documentation**

- [Implementation Learnings](06-key_learnings/implementation-learnings.md)
- [Technical Specifications](03-architecture-design/technical-specifications.md)
- [Risk Assessment](02-analysis/risk-assessment.md)

## 🎉 **Ready for Production**

The Chaos Marine is production-ready with comprehensive safety boundaries, educational error messaging, and zero impact when disabled. Start building resilience in your development workflow today!

```bash
# Start your chaos engineering journey
engx create your-next-project --dev-only --chaos-marine --chaos-level=scout
```

---

**🛩️ Part of the engx-ergonomics-poc educational development toolkit**